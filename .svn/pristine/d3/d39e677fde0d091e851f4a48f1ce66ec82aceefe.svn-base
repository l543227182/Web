<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.lcstudio.front.mapper.UsersDao">
	
	<select id="getHeadPhoto" parameterType="String">
	  select *from UserImage where UserID = #{UserID}
	</select>
	<update id="updateHeadPhoto" parameterType="Users">
	 update user  set  image = #{image} where  UserID={UserID}
	</update>
	
	<select id="loginUser" parameterType="users" resultType="users">
  	select *from users where
    	username=#{username} and password =#{password}
	</select>
	
	<select id="getCount" resultType="int">
	 select count(*) from users	 
	</select>
	 
	 <select id="getPageList" parameterType="Users" resultType="users">
	 select  users.*,roles.name from users,roles 
	  where roles.ID = users.ROLEID limit #{startRow},#{pageSize}
	 </select>
	 
	 <select id="getUser" parameterType="string" resultType="users">
	   select *from users where username = #{username}
	 </select>
	 
	<select id="getUserByID" parameterType="string" resultType="users">
	   select *from users where id = #{id}
	</select>
	 
	<delete id="deleteUser" parameterType="string">
	  delete from users where id in 
	  <foreach collection="array" item="ID" open="(" close=")" separator=",">
	  #{ID}
 	  </foreach>
	</delete>
	
	 <update id="updateUser" parameterType="Users">
	 update users 
	 <set> 
	 <trim suffixOverrides=",">
	 	
	     <if test="realname !=null">
	      realname=#{realname},
	    </if>	    
	    <if test="username !=null">
	      username=#{username},
	    </if>
	    
	     <if test="password !=null">
	       password= #{password},
	    </if>
	     <if test="email !=null">
	       email=#{email},
	    </if>
	     <if test="gender !=null">
	       gender=#{gender},
	    </if>
	    <if test="regDate !=null">
	         regDate=#{regDate},
	    </if>    
	      <if test="remark !=null">
	       remark= #{remark},
	    </if>
	      <if test="ROLEID !=null">
	        ROLEID=#{ROLEID},
	    </if>
	 </trim>
	 </set>
	   where id=#{id}
	 </update>
	 
	<insert id="addUser" parameterType="users">
		insert into users values(#{id},#{realname},#{username},#{password},
		#{gender},#{email},#{ROLEID},#{remark},#{regDate});
	</insert>
</mapper>

